{"version":3,"sources":["components/StyledDropzone.js","helpers/util.js","components/App.js","index.js"],"names":["acceptStyle","css","FileInput","styled","div","isDragAccept","StyledDropzone","onDrop","useDropzone","getRootProps","getInputProps","isFocused","isDragReject","getNameAndJpg","file","mimeHeaders","jpeg","Promise","resolve","length","snapmaticOffset","reader","FileReader","onload","e","result","target","slicedResult","slice","size","imageArray","Uint8Array","header","Array","from","subarray","map","i","toString","join","includes","name","src","window","URL","createObjectURL","Blob","type","readAsArrayBuffer","Button","button","Img","img","Ul","ul","Li","li","DropzoneContainer","App","useState","images","setImages","handleFileSelect","files","a","error","newImages","image","push","alert","concat","className","style","textAlign","title","onClick","index","key","href","download","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"ySAMMA,EAAcC,YAAH,gEAFE,qBAObC,EAAYC,IAAOC,IAAV,0MAYX,qBAAGC,cAAmCL,KAoB3BM,EAjBQ,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACxB,EAMIC,YAAY,CAAED,WALhBE,EADF,EACEA,aACAC,EAFF,EAEEA,cACAC,EAHF,EAGEA,UACAN,EAJF,EAIEA,aACAO,EALF,EAKEA,aAGF,OACE,kBAACV,EAAcO,EAAa,CAAEE,YAAWN,eAAcO,iBACrD,0BAAWF,KADb,kDCpCSG,EAAgB,SAAAC,GAC3B,IAEMC,EAAc,CAClBC,KAAM,CAAC,WAAY,WAAY,WAAY,WAAY,aAEzD,OAAO,IAAIC,SAAQ,SAAAC,GACjB,GAAIJ,EAAKK,OAASC,IAChBF,EAAQ,UADV,CAIA,IAAMG,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAAC,GACd,IAAMC,EAASD,EAAEE,OAAOD,OAClBE,EAAeF,EAAOG,MAbR,IAa+BH,EAAOI,MACpDC,EAAa,IAAIC,WAAWJ,GAC5BK,EAASC,MAAMC,KAAKJ,EAAWK,SAAS,EAd7B,IAedC,KAAI,SAAAC,GAAC,OAAIA,EAAEC,SAAS,OACpBC,KAAK,IACJP,GAAUjB,EAAYC,KAAKwB,SAASR,GACtCd,EAAQ,CACNuB,KAAM3B,EAAK2B,KAAO,OAClBC,IAAKC,OAAOC,IAAIC,gBACd,IAAIC,KAAK,CAAChB,GAAa,CAAEiB,KAAM,kBAInC7B,EAAQ,OAGZG,EAAO2B,kBAAkBlC,Q,u0BCzB7B,IAAMmC,EAAS9C,IAAO+C,OAAV,oLAUNC,EAAMhD,IAAOiD,IAAV,4CAIHC,EAAKlD,IAAOmD,GAAV,2KAWFC,EAAKpD,IAAOqD,GAAV,iDAIFC,EAAoBtD,IAAOC,IAAV,iKA8ERsD,EArEH,WACV,MAA4BC,mBAAS,IAArC,mBAAOC,EAAP,KAAeC,EAAf,KAEMC,EAAgB,uCAAG,WAAMC,GAAN,+BAAAC,EAAA,yDACF,IAAjBD,EAAM5C,OADa,iDAKnB8C,GAAQ,EACNC,EAAY,GANK,uBAOEH,GAPF,0FAONjD,EAPM,kBAQDD,EAAcC,GARb,SAQfqD,EARe,QAUnBD,EAAUE,KAAKD,GAEfF,GAAQ,EAZW,kTAgBnBA,GACFI,MACE,+EAIJR,GAAU,SAAAD,GAAM,OAAIA,EAAOU,OAAOJ,MAtBX,4EAAH,sDA6BtB,OACE,yBAAKK,UAAU,YAAYC,MAAO,CAAEC,UAAW,WAC7C,uEACA,uGAGA,2BACE,oCADF,gGAIA,kBAAChB,EAAD,KACE,kBAAC,EAAD,CAAgBlD,OAAQuD,KAEzBF,EAAOzC,OAAS,GACf,oCACE,6DACkC,IAChC,kBAAC8B,EAAD,CAAQyB,MAAM,mBAAmBC,QArB1B,WACfd,EAAU,MAoBF,cAIF,kBAACR,EAAD,KACGO,EAAOxB,KAAI,SAAC+B,EAAOS,GAAR,OACV,kBAACrB,EAAD,CAAIsB,IAAKD,GACP,uBAAGE,KAAMX,EAAMzB,IAAKqC,SAAUZ,EAAM1B,MAClC,kBAACU,EAAD,CAAKT,IAAKyB,EAAMzB,IAAKgC,MAAOP,EAAM1B,QAEpC,8BAAO0B,EAAM1B,cCjG7BuC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.44baecf1.chunk.js","sourcesContent":["import React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useDropzone } from 'react-dropzone';\n\nconst lightGreen = '#8bff8b';\n\nconst acceptStyle = css`\n  border-color: ${lightGreen};\n  color: ${lightGreen};\n`;\n\nconst FileInput = styled.div`\n  cursor: pointer;\n  border: dashed white 2px;\n  border-radius: 8px;\n  padding: 16px;\n  user-select: none;\n\n  &:focus,\n  &:active {\n    outline: none;\n  }\n\n  ${({ isDragAccept }) => isDragAccept && acceptStyle}\n`;\n\nconst StyledDropzone = ({ onDrop }) => {\n  const {\n    getRootProps,\n    getInputProps,\n    isFocused,\n    isDragAccept,\n    isDragReject,\n  } = useDropzone({ onDrop });\n\n  return (\n    <FileInput {...getRootProps({ isFocused, isDragAccept, isDragReject })}>\n      <input {...getInputProps()} />\n      Click here to select files, or drag and drop.\n    </FileInput>\n  );\n};\n\nexport default StyledDropzone;\n","export const getNameAndJpg = file => {\n  const snapmaticOffset = 292;\n  const headerLength = 4;\n  const mimeHeaders = {\n    jpeg: ['ffd8ffe0', 'ffd8ffe1', 'ffd8ffe2', 'ffd8ffe3', 'ffd8ffe8'],\n  };\n  return new Promise(resolve => {\n    if (file.length < snapmaticOffset + headerLength) {\n      resolve(null);\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = e => {\n      const result = e.target.result;\n      const slicedResult = result.slice(snapmaticOffset, result.size);\n      const imageArray = new Uint8Array(slicedResult);\n      const header = Array.from(imageArray.subarray(0, headerLength))\n        .map(i => i.toString(16))\n        .join('');\n      if (header && mimeHeaders.jpeg.includes(header)) {\n        resolve({\n          name: file.name + '.jpg',\n          src: window.URL.createObjectURL(\n            new Blob([imageArray], { type: 'image/jpeg' }),\n          ),\n        });\n      } else {\n        resolve(null);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  });\n};\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport StyledDropzone from './StyledDropzone';\nimport { getNameAndJpg } from '../helpers/util';\n\nconst Button = styled.button`\n  cursor: pointer;\n  background-color: #1c1f24;\n  padding: 12px 16px;\n  user-select: none;\n  border: none;\n  border-radius: 8px;\n  color: white;\n`;\n\nconst Img = styled.img`\n  width: 100%;\n`;\n\nconst Ul = styled.ul`\n  padding: 0;\n  margin: 16px auto 0;\n  list-style: none;\n  max-width: 50vw;\n\n  @media (max-width: 767.98px) {\n    max-width: 100%;\n  }\n`;\n\nconst Li = styled.li`\n  margin-top: 16px;\n`;\n\nconst DropzoneContainer = styled.div`\n  margin-top: 16px;\n  max-width: 400px;\n  display: flex;\n  justify-content: center;\n  margin-left: auto;\n  margin-right: auto;\n`;\n\nconst App = () => {\n  const [images, setImages] = useState([]);\n\n  const handleFileSelect = async files => {\n    if (files.length === 0) {\n      return;\n    }\n\n    let error = false;\n    const newImages = [];\n    for await (const file of files) {\n      const image = await getNameAndJpg(file);\n      if (image) {\n        newImages.push(image);\n      } else {\n        error = true;\n      }\n    }\n\n    if (error) {\n      alert(\n        'Some images could not be converted, as they were not valid Snapmatic images',\n      );\n    }\n\n    setImages(images => images.concat(newImages));\n  };\n\n  const clearAll = () => {\n    setImages([]);\n  };\n\n  return (\n    <div className=\"container\" style={{ textAlign: 'center' }}>\n      <h1>GTA V Snapmatic to JPEG / JPG converter</h1>\n      <p>\n        A simple tool to convert your GTA V Snapmatic snaps to JPEG / JPG files.\n      </p>\n      <p>\n        <b>Note:</b> This only works locally. All conversion takes place in your\n        browser. No files are uploaded.\n      </p>\n      <DropzoneContainer>\n        <StyledDropzone onDrop={handleFileSelect} />\n      </DropzoneContainer>\n      {images.length > 0 && (\n        <>\n          <p>\n            Click any image to download it.{' '}\n            <Button title=\"Clear all images\" onClick={clearAll}>\n              Clear all\n            </Button>\n          </p>\n          <Ul>\n            {images.map((image, index) => (\n              <Li key={index}>\n                <a href={image.src} download={image.name}>\n                  <Img src={image.src} title={image.name} />\n                </a>\n                <span>{image.name}</span>\n              </Li>\n            ))}\n          </Ul>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}